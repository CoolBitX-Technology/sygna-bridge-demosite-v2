{"ast":null,"code":"import { useState } from 'react';\n\nconst useForm = (initModel, submitCallback) => {\n  const [inputs, setInputs] = useState(initModel);\n\n  const handleChange = e => {\n    e.persist();\n    inputs.forEach(i => {\n      if (i.name === e.target.name) {\n        i.value = i.type === 'checkbox' ? e.target.checked : e.target.value;\n        parseInput(i);\n        validateInput(i);\n      }\n    });\n    setInputs([...inputs]);\n  };\n\n  const handleSubmit = e => {\n    e && e.preventDefault();\n    inputs.forEach(i => validateInput(i));\n    inputs.some(i => i.alert) ? setInputs([...inputs]) : submitCallback();\n  };\n\n  const parseInput = input => input.value = input.parseFun ? input.parseFun(input.value) : input.value;\n\n  const validateInput = input => {\n    let alert = null;\n    input.validators && input.validators.forEach(v => alert = v.isValidFun && !v.isValidFun(input.value) ? v.alert : alert);\n    input.alert = alert;\n  };\n\n  return [inputs, handleChange, handleSubmit];\n};\n\nexport default useForm;","map":{"version":3,"sources":["/Users/miachiu/Projects/syg_demo_web/src/hooks/useForm.js"],"names":["useState","useForm","initModel","submitCallback","inputs","setInputs","handleChange","e","persist","forEach","i","name","target","value","type","checked","parseInput","validateInput","handleSubmit","preventDefault","some","alert","input","parseFun","validators","v","isValidFun"],"mappings":"AAAA,SAASA,QAAT,QAAyB,OAAzB;;AAEA,MAAMC,OAAO,GAAG,CAACC,SAAD,EAAYC,cAAZ,KAA+B;AAC7C,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBL,QAAQ,CAACE,SAAD,CAApC;;AAEA,QAAMI,YAAY,GAAGC,CAAC,IAAI;AACxBA,IAAAA,CAAC,CAACC,OAAF;AACAJ,IAAAA,MAAM,CAACK,OAAP,CAAeC,CAAC,IAAI;AAClB,UAAIA,CAAC,CAACC,IAAF,KAAWJ,CAAC,CAACK,MAAF,CAASD,IAAxB,EAA8B;AAC5BD,QAAAA,CAAC,CAACG,KAAF,GAAUH,CAAC,CAACI,IAAF,KAAW,UAAX,GAAwBP,CAAC,CAACK,MAAF,CAASG,OAAjC,GAA2CR,CAAC,CAACK,MAAF,CAASC,KAA9D;AACAG,QAAAA,UAAU,CAACN,CAAD,CAAV;AACAO,QAAAA,aAAa,CAACP,CAAD,CAAb;AACD;AACF,KAND;AAOAL,IAAAA,SAAS,CAAC,CAAC,GAAGD,MAAJ,CAAD,CAAT;AACD,GAVD;;AAYA,QAAMc,YAAY,GAAGX,CAAC,IAAI;AACxBA,IAAAA,CAAC,IAAIA,CAAC,CAACY,cAAF,EAAL;AACAf,IAAAA,MAAM,CAACK,OAAP,CAAeC,CAAC,IAAIO,aAAa,CAACP,CAAD,CAAjC;AACAN,IAAAA,MAAM,CAACgB,IAAP,CAAYV,CAAC,IAAIA,CAAC,CAACW,KAAnB,IAA4BhB,SAAS,CAAC,CAAC,GAAGD,MAAJ,CAAD,CAArC,GAAqDD,cAAc,EAAnE;AACD,GAJD;;AAMA,QAAMa,UAAU,GAAGM,KAAK,IAAIA,KAAK,CAACT,KAAN,GAAcS,KAAK,CAACC,QAAN,GAAiBD,KAAK,CAACC,QAAN,CAAeD,KAAK,CAACT,KAArB,CAAjB,GAA+CS,KAAK,CAACT,KAA/F;;AAEA,QAAMI,aAAa,GAAGK,KAAK,IAAI;AAC7B,QAAID,KAAK,GAAG,IAAZ;AACAC,IAAAA,KAAK,CAACE,UAAN,IAAoBF,KAAK,CAACE,UAAN,CAAiBf,OAAjB,CAAyBgB,CAAC,IAAIJ,KAAK,GAAGI,CAAC,CAACC,UAAF,IAAgB,CAACD,CAAC,CAACC,UAAF,CAAaJ,KAAK,CAACT,KAAnB,CAAjB,GAA6CY,CAAC,CAACJ,KAA/C,GAAuDA,KAA7F,CAApB;AACAC,IAAAA,KAAK,CAACD,KAAN,GAAcA,KAAd;AACD,GAJD;;AAMA,SAAO,CAACjB,MAAD,EAASE,YAAT,EAAuBY,YAAvB,CAAP;AACD,CA9BD;;AAgCA,eAAejB,OAAf","sourcesContent":["import { useState } from 'react';\n\nconst useForm = (initModel, submitCallback) => {\n  const [inputs, setInputs] = useState(initModel);\n\n  const handleChange = e => {\n    e.persist();\n    inputs.forEach(i => {\n      if (i.name === e.target.name) {\n        i.value = i.type === 'checkbox' ? e.target.checked : e.target.value;\n        parseInput(i);\n        validateInput(i);\n      }\n    });\n    setInputs([...inputs]);\n  };\n\n  const handleSubmit = e => {\n    e && e.preventDefault();\n    inputs.forEach(i => validateInput(i));\n    inputs.some(i => i.alert) ? setInputs([...inputs]) : submitCallback();\n  };\n\n  const parseInput = input => input.value = input.parseFun ? input.parseFun(input.value) : input.value;\n\n  const validateInput = input => {\n    let alert = null;\n    input.validators && input.validators.forEach(v => alert = v.isValidFun && !v.isValidFun(input.value) ? v.alert : alert);\n    input.alert = alert;\n  }\n\n  return [inputs, handleChange, handleSubmit]\n};\n\nexport default useForm;"]},"metadata":{},"sourceType":"module"}